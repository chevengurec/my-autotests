  name: Run Selenium Tests

  on:
    push:
      branches: [ main ]

  jobs:
    test:
      runs-on: ubuntu-latest

      steps:
        - name: Checkout code
          uses: actions/checkout@v3

        - name: Set up Java
          uses: actions/setup-java@v3
          with:
            java-version: '11'
            distribution: 'temurin'

        # üî• –í–ê–ñ–ù–û: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Chrome –¥–ª—è CI
        - name: Install Chrome
          run: |
            sudo apt-get update
            sudo apt-get install -y wget unzip
            wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | sudo apt-key add -
            echo "deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main" | sudo tee /etc/apt/sources.list.d/google-chrome.list
            sudo apt-get update
            sudo apt-get install -y google-chrome-stable
            google-chrome --version

        # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Maven dependencies –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
        - name: Cache Maven dependencies
          uses: actions/cache@v3
          with:
            path: ~/.m2
            key: maven-${{ hashFiles('**/pom.xml') }}
            restore-keys: |
              maven-

        # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏
        - name: Run tests with detailed logging
          run: |
            echo "=== Running tests in CI mode ==="
            mvn test -Dtest=FirstTest -Dselenium.headless=true -Dbrowser=chrome-ci
          env:
            CI: true  # üî• –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è CI=true